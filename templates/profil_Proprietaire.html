{% extends 'base.html' %}

{% block content %}

{% load static %}


<div style="background-color: #F7F8F9;">

<div class="mon_profil">


    <div class="info_proprietaire">
        <div class="card mb-3" style="border: none;">
          <div class="row g-0" style="height: 420px;">
            <div class="col-md-5">
              <img style="height: 400px; width: 400px;" src="{{ user.proprietaire.profil_photo.url }}" class="img-fluid rounded-start" alt="...">
            </div>
            <div class="col-md-7 mb-3" style=" margin-left: -200px;">
              <div class="card-body">
                <h1 style="font-weight: 700;" class="card-title">{{ user.proprietaire.nom }}</h1> 
                <p> <span style="font-size: 20px; padding-right: 7px;"> 5 </span> <i class="fa-solid fa-star" style="color: #FF703F; font-size: 19px;"></i> <i class="fa-solid fa-star" style="color: #FF703F; font-size: 19px;"></i> <i class="fa-solid fa-star" style="color: #FF703F; font-size: 19px;"></i> <i class="fa-solid fa-star" style="color: #FF703F; font-size: 19px;"></i> <i class="fa-solid fa-star" style="color: #FF703F; font-size: 19px;"></i></p>
                <p>Company Agent at <a href="www.ept.sn">Ecole Polytechnique de Thies</a></p>
                <hr>
                <h6 style="font-weight: 700;">Agent licence : <span style="color: rgb(119, 115, 115);" >{{ user.proprietaire.licence }}</span></h6> <br>
                <h6 style="font-weight: 700;">Taxe Number : <span style="color: rgb(119, 115, 115);">{{ user.proprietaire.Taxe_Number }}</span></h6> <br>
                <h6 style="font-weight: 700;">Specialité : <span style="color: rgb(119, 115, 115);">{{ user.proprietaire.Specialite }}</span></h6> <br>
                <div>
                    <a href=""><button class="btn" style="background-color: #007BFF; color: white; font-weight: 700;">Mes Messages</button> </a>
                    <a href="{% url 'logout' %}"><button class="btn" style="background-color: #FF703F; color: white; font-weight: 700;">Déconnexion</button> </a>
                </div>
              </div>
            </div>
          </div>
        </div>
    </div>

    <div style="background-color: white; margin-top: 40px; padding: 20px;" >

        <h1 style="text-align: center; font-weight: 700; margin-top: 30px;">Mes Appartements</h1>

        <div class="articles_block">
            <div class="row">
            {% for appartement in appartements %}
              <div style="width: 40%;">
                <div class="article">
                  <a href="{% url 'detail_appartement' appartement.id %}">
                    <div class="card">
                      <div class="card text-bg-primary">
                        <div class="x"><img src="{{ appartement.profil_photo.url }}" class="card-img" alt="..."></div>
                        <div class="card-img-overlay">
                          <h4 class="card-title prix">{{ appartement.prix }} Fcfa / Mois</h4>
                        </div>
                      </div>
                      <div class="card-body">
                        <p class="card-title nom"> {{ appartement.nom }} </p>
                        <p class="card-text adresse">{{ appartement.adresse }}</p>
                        <div class="device">
                          <div><i style="font-size: 20px;" class="fa-solid fa-bed"></i> {{ appartement.nombre_chambres }}</div>
                          <div><i style="font-size: 20px;" class="fa-solid fa-bath"></i> {{ appartement.salle_de_bain }}</div>
                          <div><i style="font-size: 20px;" class="fa-solid fa-car"></i> {{ appartement.garrage }}</div>
                           
                        </div>
                        <div>
                          <hr>
                          <span class="props"> <i style="font-size: 15px;" class="fa-regular fa-user"></i> <a class="props" href="">{{ appartement.proprietaire.nom }}</a> </span>
                        </div>
                      </div>
                    </div>
                  </a>
                </div>
              </div>
              {% if forloop.counter|divisibleby:2 %}
                </div><div class="row">
              {% endif %}
            {% endfor %}
          </div>
        </div>

    </div>

    <div style="background-color: white; margin-top: 40px; padding: 20px;">
        {% for message in messages %}
        <div class="d-flex flex-row justify-content-between">
            <div class="message">
                <h2>{{ message.expediteur_name }}</h2>
                <span>Email : </span> <span style="color: rgb(119, 115, 115);">{{ message.expediteur_email }}</span> <br>
                <span>Mobile : </span> <span style="color: rgb(119, 115, 115);">{{ message.expediteur_phone }}</span> <br>
                <span>Date : </span> <span style="color: rgb(119, 115, 115);">{{ message.date_envoi }}</span>
                <hr>
                <div>
                    {{ message.contenu}}
                </div>
            </div>

            <div>
                <div class="nom_prix">
                    <div style="font-size: 20px;">{{ message.appartement.nom }}</div>
                  </div>
                
                  <div style="margin-top: 20px; margin-bottom: 20px;" >
                    <i style="font-size: 10px;" class="fa-solid fa-location-dot"></i> {{ message.appartement.adresse }}
                  </div>
                <img style="height: 280px; width: 300px; margin: auto;" src="{{ message.appartement.profil_photo.url}}" alt="Image appartement">
            </div>            
        </div>

        <br><hr>

        {% endfor %}
    </div>

</div>

</div>



{% endblock content %}



